### Класс ```FeaturesGenerator```

___

### Данный класс предназначен для генерации различных временных признаков на основе временного ряда.

### Кроме исходного временного ряда в виде ```pd.DataFrame``` нужен ещё и конфигурационный [JSON файл](../examples/data/demo_config.json).

___

### Структура JSON файла.

### JSON состоит из 2 основных тегов:

### 1) ```"features"``` - тег, внутри которого находится словарь с конфигурацией признаков.

### 2) ```"options"``` - тег, в котором указан параметр ```"drop_na"```, отвечающий за отброс NaN значений, получившихся при генерации признаков.

___

### Детальный разбор тегов внутри ```"features"```.

### 1) Тег ```"lags"``` - отвечает за создание простых лаговых признаков. Является массивом словарей, каждый словарь отвечает за отдельный столбец с признаком. Внутри словаря есть 3 обязательных поля:

#### 1) ```"name"``` - название столбца с признаком в новом ```pd.DataFrame```. Строка.
#### 2) ```"source"``` - название столбца, на который накладывается лаговый оператор. Строка.
#### 3) ```"window"``` - размер лага. Целое число.

### 2) Тег ```"shift"``` - отвечает за сдваиговые признаки с выполнением арифметических операций. (К примеру нахождение разницы между данным элементом и элементом на 12 шагов ранее). Является массивом словарей, каждый словарь отвечает за отдельный столбец с признаком. Внутри словаря есть 4 обязательных поля:

#### 1) ```"name"``` - название столбца с признаком в новом ```pd.DataFrame```. Строка.
#### 2) ```"source"``` - название столбца, на который накладывается лаговый оператор. Строка.
#### 3) ```"window"``` - размер лага. Целое число.
#### 4) ```"operation"``` - название операции, которая выполняется над элементами. Строка. <br>Допустимые значения:
1) ```"diff"``` - вычитание (```np.subtract```),
2) ```"sum"``` - сложение (```np.sum```),
3) ```"mul"``` - умножение (```np.multiply```),
4) ```"div"``` - деление (```np.divide```).

### 3) Тег ```"rolling"``` - отвечает за создание скользящих статистик. Является массивом словарей, каждый словарь отвечает за отдельный столбец с признаком. Внутри словаря есть 4 обязательных поля:

#### 1) ```"name"``` - название столбца с признаком в новом ```pd.DataFrame```. Строка.

#### 2) ```"source"``` - название столбца, на основе которого генерируется скользящая статистика. Строка.

#### 3) ```"window"``` - размер лага. Целое число.

#### 4) ```"operation"``` - название операции, которая выполняется над элементами. Строка. <br>Допустимые значения:
1) ```"mean"``` - выборочное среднее (```np.mean```),
2) ```"sum"``` - сумма (```np.sum```),
3) ```"max"``` - максимальный элемент (```np.max```),
4) ```"min"``` - миниминальный элемент (```np.min```),
5) ```"std"``` - среднеквадратичное отклонение (```np.std```),
6) ```"var"``` - выборочная дисперсия (```np.var```).

### 4) Тег ```"absolute_time"``` - отвечает за создание абсолютных временных признаков. Является массивом словарей, каждый словарь отвечает за отдельный столбец с признаком. Внутри словаря есть 5 полей, 3 из которых обязательные:

#### 1) ```"name"``` - название столбца с признаком в новом ```pd.DataFrame```. Строка.

#### 2) ```"source"``` - название столбца, на основе которого генерируется абсолютный временный признак. Строка.

#### 3) ```"time_unit"``` - вид временного признака. Строка.<br>Допустимые значения:
1) ```"second"``` - секунды,
2) ```"minute"``` - минуты,
3) ```"hour"``` - часы,
4) ```"day"``` - дни,
5) ```"month"``` - месяцы,
6) ```"year"``` - годы,
7) ```"dayofweek"``` - дни недели,
8) ```"quarter"``` - кварталы.

#### 4) ```"cycle"``` (_Опциональный параметр_) - количество элементов в цикле. (Для месяца - 12, для дня недели - 7 и т.д.). Целое число.

#### 5) ```"function"``` (_Опциональный параметр_) - циклическая функция для нормирования величины. Строка.<br>Допустимые значения:
1) ```"cos"```,
2) ```"sin"```.

### 4) Тег ```"relative_time"``` - отвечает за создание относительных временных признаков. Является массивом словарей, каждый словарь отвечает за отдельный столбец с признаком. Внутри словаря есть 4 полей, 3 из которых обязательные:

#### 1) ```"name"``` - название столбца с признаком в новом ```pd.DataFrame```. Строка.

#### 2) ```"source"``` - название столбца, на основе которого генерируется абсолютный временный признак. Строка.

#### 3) ```"time_unit"``` - вид временного признака. Строка.<br>Допустимые значения:
1) ```"total_second"``` - секунды,
2) ```"minute"``` - минуты,
3) ```"hour"``` - часы,
4) ```"day"``` - дни,
5) ```"month"``` - месяцы,
6) ```"year"``` - годы.

#### 4) ```"range"``` (_Опциональный параметр_) - ограничения для нормирования временного признака. Массив из 2 элементов [min_value, max_value].

___

### [_> На главную](main.md).